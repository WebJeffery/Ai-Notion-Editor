<!doctype html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Stencil Component Starter</title>

    <!-- 先加载组件库 -->
    <script type="module" src="/build/swc-tiptap.esm.js"></script>
    <link rel="stylesheet" href="/build/swc-tiptap.css" />

    <!-- 初始化编辑器的脚本 -->
    <script type="module">
      // 等待组件库加载完成
      window.addEventListener('DOMContentLoaded', async () => {
        try {
          // 从全局变量中获取 useEditor
          const { useEditor } = window.swcTiptap;
          // const editorContent = document.getElementById('swc-editor-content');

          // 初始化编辑器
          const { tiptapEditor: editor, editorStore } = useEditor({
            // element: document.getElementById('swc-editor-content'),
            content: '<p>欢迎使用 Tiptap 编辑器！</p>',
            placeholder: '请输入内容...',
            autofocus: true,
            onUpdate: ({ editor }) => {
              console.log('内容更新:', editor.getHTML());
            },
          });

          // 获取容器组件并设置 editor 实例
          const container = document.getElementById('editor-container');
          if (container) {
            container.editorStore = editorStore;
            // editorContent.editor = editor;
            container.editor = editor;
            window.editor = editor;
            window.editorStore = editorStore;
            console.log('编辑器实例设置成功', editorStore);
          } else {
            console.error('找不到编辑器容器元素');
          }
        } catch (error) {
          console.error('初始化编辑器时出错:', error);
        }
      });
    </script>
  </head>
  <body>
    <div class="container mx-auto p-4 max-w-4xl">
      <swc-editor-container id="editor-container" class="flex flex-col">
        <swc-editor-toolbar slot="toolbar" class="p-2 bg-gray-50"></swc-editor-toolbar>
        <swc-editor-content id="swc-editor-content" slot="content" class="h-[600px]"></swc-editor-content>
      </swc-editor-container>
    </div>
  </body>
</html>
